<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Chicken Road 2.0 Demo</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  header {
    display: flex;
    justify-content: center;
    align-items: center;
    background: #111;
    padding: 8px;
    font-size: 14px;
    gap: 8px;
  }

  select {
    background: #222;
    color: #fff;
    border: 1px solid #444;
    border-radius: 5px;
    padding: 4px 8px;
    cursor: pointer;
  }

  .frame-wrapper {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    transform-origin: center center;
    transition: transform 0.2s ease;
  }

.popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  justify-content: center;
  align-items: center;
  text-align: center;
  flex-direction: column;
  z-index: 10;
  color: #000;
  backdrop-filter: blur(12px) brightness(0.8);
  -webkit-backdrop-filter: blur(12px) brightness(0.8);
  background: rgba(255, 255, 255, 0.85);
  animation: fadeIn 0.5s ease forwards;

  /* ‚ú® Make popup unselectable & pointer-friendly */
  user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  -moz-user-select: none;
  cursor: pointer;
  touch-action: manipulation;
}

  .popup h2 {
    font-size: 22px;
    margin-bottom: 8px;
    font-weight: 600;
  }

  .popup p {
    color: #333;
    font-size: 15px;
    margin-bottom: 20px;
    line-height: 1.4;
  }

  .popup .tap-info {
    background: #007aff;
    color: #fff;
    padding: 12px 24px;
    border-radius: 25px;
    font-weight: 500;
    font-size: 16px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .redirect-msg {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 13px;
    color: #aaa;
    opacity: 0.8;
  }
</style>
</head>
<body>

<header>
  <span>üéÆ Quality:</span>
  <select id="resolution">
    <option value="1">HD</option>
    <option value="0.85">Medium</option>
    <option value="0.7" selected>Low</option>
    <option value="0.5">Ultra Low</option>
  </select>
</header>

<div class="frame-wrapper">
  <iframe
    id="gameFrame"
    src="https://demo.inout.games/games-view/games/game/?authToken=9fc2bc8e-40a1-fee4-9900-2102cb30a7af&operatorId=ee2013ed-e1f0-4d6e-97d2-f36619e2eb52&gameMode=chicken-road-two&isDemo=MTc0NDgwNDk0NzQ0Nw%3D%3D&currency=USD&lang=en"
    allowfullscreen
    scrolling="no"
  ></iframe>
</div>

<div class="redirect-msg" id="redirectMsg">Enjoy your demo! You can play for 60 seconds.</div>

<div class="popup" id="popup">
  <h2>üêî Demo Ended</h2>
  <p>To continue playing Chicken Road 2 and claim your ‚Çπ28 bonus,<br>please register now on BharatClub.</p>
  <div class="tap-info">üëâ Tap anywhere to continue</div>
</div>

<script>
  const select = document.getElementById('resolution');
  const frame = document.getElementById('gameFrame');
  const popup = document.getElementById('popup');
  const msg = document.getElementById('redirectMsg');
  const redirectLink = "https://www.bhdfiejand.com/#/register?invitationCode=818553846140";
  const LOCK_KEY = "chickenroad_last_play";

  // üîí Check if user already played within 24 hours
  const lastPlay = localStorage.getItem(LOCK_KEY);
  if (lastPlay) {
    const diff = Date.now() - parseInt(lastPlay, 10);
    if (diff < 24 * 60 * 60 * 1000) {
      // Redirect instantly if within 24h
      window.location.href = redirectLink;
    }
  }

  // Save/load quality preference
  const saved = localStorage.getItem('cr_quality');
  if (saved) select.value = saved;

  const setScale = () => {
    const scale = parseFloat(select.value);
    frame.style.transform = `scale(${scale})`;
  };
  select.addEventListener('change', () => {
    localStorage.setItem('cr_quality', select.value);
    setScale();
  });
  window.addEventListener('resize', setScale);
  setScale();

  // Timer logic
  let countdown = 60; // seconds
  const timer = setInterval(() => {
    countdown--;

    if (countdown === 5) {
      popup.style.display = 'flex'; // show popup
      msg.style.display = 'none';
    }

    if (countdown <= 0) {
      clearInterval(timer);
      localStorage.setItem(LOCK_KEY, Date.now().toString());
      window.location.href = redirectLink;
    }
  }, 1000);

  // Tap anywhere to redirect
  popup.addEventListener('click', () => {
    localStorage.setItem(LOCK_KEY, Date.now().toString());
    window.location.href = redirectLink;
  });
</script>

</body>
</html>
